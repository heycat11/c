#include <stdio.h>
#include <string.h>

int crc(char *input, char *output, char *gp) {
    int i, j;
    for (i = 0; i < strlen(input); i++) {
        if (output[i] == '1') {
            for (j = 0; j < strlen(gp); j++) {
                output[i + j] = (output[i + j] == gp[j]) ? '0' : '1';
            }
        }
    }

    for (i = 0; i < strlen(output); i++) {
        if (output[i] == '1') {
            return 1;
        }
    }

    return 0;
}

int main() {
    char input[50], output[50], recv[50], gp[50];
    printf("Enter the input message in binary: ");
    scanf("%s", input);
    printf("Enter the generator polynomial: ");
    scanf("%s", gp);

    strcpy(output, input);
    for (int i = 1; i < strlen(gp); i++) {
        strcat(output, "0");
    }

    printf("The transmitted message is %s %s\n", input, output + strlen(input));

    printf("\nEnter the received message in binary: ");
    scanf("%s", recv);

    if (crc(input, recv, gp)) {
        printf("Error in data transmission has occurred\n");
    } else {
        printf("No error in data\n");
    }

    return 0;
}
